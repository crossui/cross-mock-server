webpackJsonp([14],{"+L4n":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("woOf"),i=a.n(r),n=a("TVG1"),s=a("L6bb"),o=a.n(s),l={name:"user_index",data:function(){return{searchAccount:"",modalType:!0,visible:!1,formValidate:{username:"",account:"",password:"",verify:!1},ruleValidate:{account:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^(?!(\s+$))/,message:"不可为纯空格"}],username:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^(?!(\s+$))/,message:"不可为纯空格"}],verify:[{required:!0,message:"请选择",trigger:"change"}],password:[{required:!0,min:6,message:"不能为空,最少6位",trigger:"blur"},{pattern:/^(?!(\s+$))/,message:"不可为纯空格"}]},data:[],pagination:{showQuickJumper:!0},loading:!1,columns:[{title:"编号",dataIndex:"uid",width:"10%",align:"center"},{title:"登陆账号",dataIndex:"account",align:"center"},{title:"姓名",dataIndex:"username",align:"center"},{title:"状态",dataIndex:"verify",scopedSlots:{customRender:"verify"},align:"center"},{title:"创建时间",dataIndex:"createtime",align:"center"},{title:"操作",width:"20%",scopedSlots:{customRender:"operation"},align:"center"}]}},mounted:function(){this.fetch(1)},methods:{fetch:function(e){var t=this;this.loading=!0,this.$request({method:"GET",url:"/users",params:{account:this.searchAccount,page:e,pagesize:10}}).then(function(a){t.data=a.data.rows,t.pagination=n.a.pager(t,t.pagination,{current:e,total:a.data.totals}),t.loading=!1})},handleTableChange:function(e){this.fetch(e.current)},onSearch:function(){this.fetch(1)},handleCancel:function(){this.$refs.formValidate.resetFields(),this.visible=!1},handleOk:function(){var e=this;this.$refs.formValidate.validate(function(t){if(t){var a={account:e.formValidate.account,username:e.formValidate.username,password:""==e.formValidate.password?"":o()(e.formValidate.password),verify:e.formValidate.verify},r="POST",i="/users";e.modalType?a.createtime=n.a.formatDate(new Date):(r="PATCH",i="/users/"+e.formValidate.uid),e.$request({method:r,url:i,data:a}).then(function(t){t&&(e.$message.success(t.message),e.fetch(1),e.handleCancel())})}else e.$message.error("验证失败!")})},handleAddClick:function(){this.modalType=!0,this.visible=!0},handleEidt:function(e){var t=this;this.modalType=!1,this.visible=!0,this.$nextTick(function(){t.formValidate=i()({},t.formValidate,e)})},handleDelete:function(e){var t=this;this.$confirm({title:"提示",content:"确认删除些项数据?",onOk:function(){t.$request({method:"POST",url:"/users/delete",data:{id:e.uid}}).then(function(e){e&&(t.$message.success(e.message),t.fetch(1))})}})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",{attrs:{title:"用户列表"}},[a("v-button",{attrs:{slot:"extra",type:"primary",size:"small"},on:{click:e.handleAddClick},slot:"extra"},[e._v("新增")]),e._v(" "),a("div",{staticClass:"margin-bottom-10"},[a("v-input-search",{staticStyle:{width:"200px"},attrs:{placeholder:"登陆账号",enterButton:""},on:{search:e.onSearch},model:{value:e.searchAccount,callback:function(t){e.searchAccount=t},expression:"searchAccount"}})],1),e._v(" "),a("v-table",{attrs:{columns:e.columns,dataSource:e.data,pagination:e.pagination,loading:e.loading,bordered:""},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"operation",fn:function(t,r,i){return[a("div",{staticClass:"editable-row-operations"},[a("v-button-group",{attrs:{size:"small"}},[a("v-button",{on:{click:function(){return e.handleEidt(r)}}},[e._v("编辑")]),e._v(" "),a("v-button",{on:{click:function(){return e.handleDelete(r)}}},[e._v("删除")])],1)],1)]}},{key:"verify",fn:function(t,r,i){return[a("div",{staticClass:"user-row-verify"},[e._v(e._s("1"==r.verify?"通过":"不通过"))])]}}])})],1),e._v(" "),a("v-modal",{attrs:{title:"用户管理",maskClosable:!1},on:{ok:e.handleOk,cancel:e.handleCancel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("v-form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":100}},[a("v-form-item",{attrs:{label:"姓名",prop:"username"}},[a("v-input",{attrs:{type:"text"},model:{value:e.formValidate.username,callback:function(t){e.$set(e.formValidate,"username",t)},expression:"formValidate.username"}})],1),e._v(" "),a("v-form-item",{attrs:{label:"登陆账号",prop:"account"}},[a("v-input",{attrs:{type:"text"},model:{value:e.formValidate.account,callback:function(t){e.$set(e.formValidate,"account",t)},expression:"formValidate.account"}})],1),e._v(" "),a("v-form-item",{attrs:{label:"密码",prop:"password"}},[a("v-input",{attrs:{type:"password"},model:{value:e.formValidate.password,callback:function(t){e.$set(e.formValidate,"password",t)},expression:"formValidate.password"}})],1),e._v(" "),a("v-form-item",{attrs:{label:"状态",prop:"verify"}},[a("v-radio-group",{attrs:{name:"radioGroup"},model:{value:e.formValidate.verify,callback:function(t){e.$set(e.formValidate,"verify",t)},expression:"formValidate.verify"}},[a("v-radio",{attrs:{value:"1"}},[e._v("通过")]),e._v(" "),a("v-radio",{attrs:{value:"2"}},[e._v("不通过")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(l,c,!1,function(e){a("Sv2s")},"data-v-11c857e7",null);t.default=d.exports},GiLI:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"",""])},Sv2s:function(e,t,a){var r=a("GiLI");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("69f6ff8c",r,!0,{})}});
//# sourceMappingURL=14.51cd3c9901ea88307b92.js.map