{"version":3,"sources":["webpack:///./src/views/project/project.vue?8709","webpack:///src/views/project/project.vue","webpack:///./src/views/project/project.vue","webpack:///./src/views/project/project.vue?3063","webpack:///./src/views/project/project.vue?8c16"],"names":["content","__webpack_require__","module","i","locals","exports","project","name","data","_this2","this","listLoading","projVisible","projModalType","paginationProj","size","simple","total","onChange","page","onShowSizeChange","formProj","projectname","ruleProj","required","message","trigger","pattern","projectListData","selectedProject","searchModuleName","modModalType","modleVisible","pmidOptions","formModle","modulename","pmid","ruleModle","splitVal","tabledata","expandedRowKeys","pagination","showQuickJumper","loading","columns","title","dataIndex","width","scopedSlots","customRender","align","mounted","init","methods","fetchProject","pageNum","_this3","$request","method","url","params","pagesize","then","res","rows","length","pid","totals","fetch","catch","err","handleAddProjectClick","handleProjOk","_this4","$refs","validate","valid","createtime","util","formatDate","Date","$message","success","handleProjCancel","error","resetFields","handleEidtProj","record","_this5","$nextTick","assign_default","handleDeleteProj","_this","$confirm","onOk","id","handleSelectProj","_this6","projectid","result","label","value","forEach","item","push","mid","toString","convertToTreeData","temp","obj","child","children","map","filter","undefined","pager","current","handleTableChange","p","t","r","handleAddModulesClick","onSearch","handleModleOk","_this7","parseInt","handleModleCancel","handleEidtModule","_this8","handleView","$router","query","handleAddChildModule","handleDeleteModule","esExports","render","_vm","_h","$createElement","_c","_self","attrs","bodyStyle","padding","staticClass","model","callback","$$v","expression","slot","type","on","click","_v","dataSource","bordered","_u","key","fn","index","class","selected","$event","icon","_s","staticStyle","placeholder","enterButton","search","rowKey","indentSize","change","text","_e","maskClosable","ok","cancel","ref","rules","label-width","prop","$set","options","staticRenderFns","Component","normalizeComponent","project_project","ssrContext","__webpack_exports__"],"mappings":"wCAGA,IAAAA,EAAcC,EAAQ,QACtB,iBAAAD,QAA4CE,EAAAC,EAASH,EAAA,MACrDA,EAAAI,SAAAF,EAAAG,QAAAL,EAAAI,QAEaH,EAAQ,OAARA,CAAwE,WAAAD,GAAA,+HC2IrFM,GACAC,KAAA,gBACAC,KAFA,WAEA,IAAAC,EAAAC,KACA,OACAC,aAAA,EACAC,aAAA,EACAC,eAAA,EACAC,gBACAC,KAAA,QACAC,QAAA,EACAC,MAAA,EACAC,SAAA,SAAAC,GACAV,EAAAW,iBAAAD,KAGAE,UACAC,YAAA,IAEAC,UACAD,cAEAE,UAAA,EACAC,QAAA,OACAC,QAAA,SAEAC,QAAA,cAAAF,QAAA,YAGAG,mBACAC,gBAAA,GAEAC,iBAAA,GACAC,cAAA,EACAC,cAAA,EACAC,eACAC,WACAC,WAAA,GACAC,KAAA,KAEAC,WACAD,OAEAZ,UAAA,EACAC,QAAA,SAGAU,aAEAX,UAAA,EACAC,QAAA,OACAC,QAAA,SAEAC,QAAA,cAAAF,QAAA,YAGAa,SAAA,GACAC,aACAC,mBACAC,YAAAC,iBAAA,GACAC,SAAA,EACAC,UAEAC,MAAA,OACAC,UAAA,eAGAD,MAAA,KACAE,MAAA,MACAC,aAAAC,aAAA,aACAC,MAAA,aAKAC,QA1EA,WA2EAzC,KAAA0C,QAEAC,SACAD,KADA,WAEA1C,KAAA4C,aAAA,IAGAA,aALA,SAKAC,GAAA,IAAAC,EAAA9C,KACAA,KAAAC,aAAA,EACAD,KAAA+C,UACAC,OAAA,MACAC,IAAA,YACAC,QACAzC,KAAAoC,EACAM,SAAA,MAGAC,KAAA,SAAAC,GACAA,IACAP,EAAA5B,gBAAAmC,EAAAvD,KAAAwD,KACAR,EAAA3B,gBAAAkC,EAAAvD,KAAAwD,KAAAC,OACAF,EAAAvD,KAAAwD,KAAA,GAAAE,IACA,GACAV,EAAA1C,eAAAG,MAAA8C,EAAAvD,KAAA2D,OACAX,EAAAY,MAAA,IAEAZ,EAAA7C,aAAA,IAEA0D,MAAA,SAAAC,GACAd,EAAA7C,aAAA,KAIA4D,sBA/BA,WAgCA7D,KAAAG,eAAA,EACAH,KAAAE,aAAA,GAGA4D,aApCA,WAoCA,IAAAC,EAAA/D,KACAA,KAAAgE,MAAA,SAAAC,SAAA,SAAAC,GACA,GAAAA,EAAA,CACA,IAAAhB,GACAtC,YAAAmD,EAAApD,SAAAC,aAEAoC,EAAA,OACAC,EAAA,YACAc,EAAA5D,cAIA+C,EAAAiB,WAAAC,EAAA,EAAAC,WAAA,IAAAC,OAHAtB,EAAA,QACAC,EAAA,aAAAc,EAAApD,SAAA6C,KAIAO,EAAAhB,UACAC,SACAC,MACAnD,KAAAoD,IACAE,KAAA,SAAAC,GACAA,IACAU,EAAAQ,SAAAC,QAAAnB,EAAAtC,SACAgD,EAAAnB,aAAA,GACAmB,EAAAU,2BAIAV,EAAAQ,SAAAG,MAAA,YAKAD,iBAnEA,WAoEAzE,KAAAgE,MAAA,SAAAW,cACA3E,KAAAE,aAAA,GAGA0E,eAxEA,SAwEAC,GAAA,IAAAC,EAAA9E,KACAA,KAAAG,eAAA,EACAH,KAAAE,aAAA,EACAF,KAAA+E,UAAA,WACAD,EAAAnE,SAAAqE,OAAAF,EAAAnE,SAAAkE,MAIAI,iBAhFA,SAgFAJ,GACA,IAAAK,EAAAlF,KACAA,KAAAmF,UACAhD,MAAA,KACA7C,QAAA,2BACA8F,KAHA,WAIAF,EACAnC,UACAC,OAAA,OACAC,IAAA,mBACAnD,MACAuF,GAAAR,EAAArB,OAGAJ,KAAA,SAAAC,GACAA,IACA6B,EAAAX,SAAAC,QAAAnB,EAAAtC,SACAmE,EAAAtC,aAAA,UAOA0C,iBAxGA,SAwGAT,GACA7E,KAAAmB,gBAAA0D,EAAArB,IACAxD,KAAA0D,MAAA,IAGAhD,iBA7GA,SA6GAD,GACAT,KAAA4C,aAAAnC,IAGAiD,MAjHA,SAiHAb,GAAA,IAAA0C,EAAAvF,KACAA,KAAAiC,SAAA,EACAjC,KAAA+C,UACAC,OAAA,MACAC,IAAA,WACAC,QACAzB,WAAAzB,KAAAoB,iBACAoE,UAAAxF,KAAAmB,gBACAV,KAAAoC,EACAM,SAAA,MAEAC,KAAA,SAAAC,GA/OA,IAAAvD,EACA2F,EA+OAF,EAAAhE,aAhPAzB,EAgPAuD,EAAAvD,KAAAwD,KA/OAmC,IAEAC,MAAA,OACAC,MAAA,MAGA7F,EAAA8F,QAAA,SAAAC,GACA,IAAAA,EAAAnE,MACA+D,EAAAK,MACAJ,MAAAG,EAAApE,WACAkE,MAAAE,EAAAE,IAAAC,eAIAP,GAkOAF,EAAA1D,UA/NA,SAAAoE,EAAAnG,EAAA0D,GAGA,IAFA,IAAAiC,KACAS,OAAA,EACAzG,EAAA,EAAAA,EAAAK,EAAAyD,OAAA9D,IACA,GAAAK,EAAAL,GAAAiC,OAAA8B,EAAA,CACA,IAAA2C,EAAArG,EAAAL,IACAyG,EAAAD,EAAAnG,IAAAL,GAAAsG,MACAxC,OAAA,IACA2C,EAAAN,QAAA,SAAAC,GACAA,EAAAO,OAAA,IAEAD,EAAAE,SAAAH,GAEAT,EAAAK,KAAAK,GAIA,OAAAV,EA8MAQ,CAAA5C,EAAAvD,KAAAwD,KAAA,GACAiC,EAAAzD,gBAAAyD,EAAA1D,UAAAyE,IAAA,SAAAT,GACA,GAAAA,EAAAQ,SACA,OAAAR,EAAAE,MAEAQ,OAAA,SAAAV,GACA,YAAAW,GAAAX,IAEAN,EAAAxD,WAAAqC,EAAA,EAAAqC,MAAAlB,IAAAxD,YACA2E,QAAA7D,EACAtC,MAAA8C,EAAAvD,KAAA2D,SAEA8B,EAAAtD,SAAA,KAIA0E,kBA9IA,SA8IAC,EAAAC,EAAAC,GACA9G,KAAA0D,MAAAkD,EAAAF,UAGAK,sBAlJA,WAmJA/G,KAAAqB,cAAA,EACArB,KAAAsB,cAAA,GAGA0F,SAvJA,WAwJAhH,KAAA0D,MAAA,IAGAuD,cA3JA,WA2JA,IAAAC,EAAAlH,KACAA,KAAAgE,MAAA,UAAAC,SAAA,SAAAC,GACA,GAAAA,EAAA,CACA,IAAAhB,GACAzB,WAAAyF,EAAA1F,UAAAC,WACA+D,UAAA0B,EAAA/F,gBACAO,KAAAyF,SAAAD,EAAA1F,UAAAE,OAEAsB,EAAA,OACAC,EAAA,WACAiE,EAAA7F,aAIA6B,EAAAiB,WAAAC,EAAA,EAAAC,WAAA,IAAAC,OAHAtB,EAAA,QACAC,EAAA,YAAAiE,EAAA1F,UAAAuE,KAKAmB,EAAAnE,UACAC,SACAC,MACAnD,KAAAoD,IACAE,KAAA,SAAAC,GACAA,IACA6D,EAAA3C,SAAAC,QAAAnB,EAAAtC,SACAmG,EAAAxD,MAAA,GACAwD,EAAAE,4BAIAF,EAAA3C,SAAAG,MAAA,YAKA0C,kBA7LA,WA8LApH,KAAAgE,MAAA,UAAAW,cACA3E,KAAAsB,cAAA,GAGA+F,iBAlMA,SAkMAxC,GAAA,IAAAyC,EAAAtH,KACAA,KAAAqB,cAAA,EACArB,KAAAsB,cAAA,EACAtB,KAAA+E,UAAA,WACAF,EAAAnD,KAAAmD,EAAAnD,KAAAsE,WACAsB,EAAA9F,UAAAwD,OAAAsC,EAAA9F,UAAAqD,MAIA0C,WA3MA,SA2MA1C,GACA7E,KAAAwH,QAAA1B,MACAjG,KAAA,kBACA4H,OACAjE,IAAAxD,KAAAmB,gBACA4E,IAAAlB,EAAAkB,QAKA2B,qBArNA,SAqNA7C,GACA7E,KAAAqB,cAAA,EACArB,KAAAsB,cAAA,EACAtB,KAAAwB,UAAAE,KAAAmD,EAAAkB,IAAAC,YAGA2B,mBA3NA,SA2NA9C,GACA,IAAAK,EAAAlF,KACAA,KAAAmF,UACAhD,MAAA,KACA7C,QAAA,yBACA8F,KAHA,WAIAF,EACAnC,UACAC,OAAA,OACAC,IAAA,kBACAnD,MACAuF,GAAAR,EAAAkB,OAGA3C,KAAA,SAAAC,GACAA,IACA6B,EAAAX,SAAAC,QAAAnB,EAAAtC,SACAmE,EAAAxB,MAAA,YCxcekE,GADGC,OAFL,WAAa,IAAIC,EAAI9H,KAAS+H,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,OAAOA,EAAG,UAAUE,OAAOhG,MAAQ,OAAOiG,WAAaC,QAAS,UAAUJ,EAAG,OAAOK,YAAY,eAAeL,EAAG,WAAWM,OAAO5C,MAAOmC,EAAIlG,SAAU4G,SAAS,SAAUC,GAAMX,EAAIlG,SAAS6G,GAAKC,WAAW,cAAcT,EAAG,OAAOK,YAAY,6BAA6BH,OAAOQ,KAAO,QAAQA,KAAK,SAASV,EAAG,OAAOK,YAAY,8BAA8BL,EAAG,YAAYK,YAAY,KAAKH,OAAOS,KAAO,UAAUvI,KAAO,SAASwI,IAAIC,MAAQhB,EAAIjE,yBAAyBiE,EAAIiB,GAAG,SAAS,GAAGjB,EAAIiB,GAAG,KAAKd,EAAG,UAAUE,OAAOa,WAAalB,EAAI5G,gBAAgBe,QAAU6F,EAAI7H,YAAYgJ,SAAW,GAAG5I,KAAO,QAAQ0B,WAAa+F,EAAI1H,gBAAgBkC,YAAYwF,EAAIoB,KAAKC,IAAI,aAAaC,GAAG,SAASvD,EAAMwD,GAAO,OAAOpB,EAAG,eAAekB,IAAI,WAAWG,OAAOC,SAAY1D,EAAKrC,KAAOsE,EAAI3G,iBAAiB0H,IAAIC,MAAQ,SAASU,GAAQ1B,EAAIxC,iBAAiBO,OAAUoC,EAAG,kBAAkBE,OAAOQ,KAAO,UAAUtI,KAAO,SAASsI,KAAK,YAAYV,EAAG,YAAYE,OAAOsB,KAAO,QAAQZ,IAAIC,MAAQ,WAAc,OAAOhB,EAAIlD,eAAeiB,OAAYiC,EAAIiB,GAAG,KAAKd,EAAG,YAAYE,OAAOsB,KAAO,UAAUZ,IAAIC,MAAQ,WAAc,OAAOhB,EAAI7C,iBAAiBY,QAAa,GAAGiC,EAAIiB,GAAG,KAAKd,EAAG,QAAQH,EAAIiB,GAAGjB,EAAI4B,GAAG7D,EAAKjF,iBAAiB,UAAU,GAAGkH,EAAIiB,GAAG,KAAKd,EAAG,OAAOK,YAAY,8BAA8BH,OAAOQ,KAAO,SAASA,KAAK,UAAUV,EAAG,OAAOK,YAAY,8BAA8BL,EAAG,OAAOK,YAAY,OAAOL,EAAG,kBAAkB0B,aAAatH,MAAQ,SAAS8F,OAAOyB,YAAc,OAAOC,YAAc,GAAGxJ,KAAO,SAASwI,IAAIiB,OAAShC,EAAId,UAAUuB,OAAO5C,MAAOmC,EAAI1G,iBAAkBoH,SAAS,SAAUC,GAAMX,EAAI1G,iBAAiBqH,GAAKC,WAAW,uBAAuB,GAAGZ,EAAIiB,GAAG,KAAKd,EAAG,YAAYK,YAAY,KAAKH,OAAOS,KAAO,UAAUvI,KAAO,SAASwI,IAAIC,MAAQhB,EAAIf,yBAAyBe,EAAIiB,GAAG,SAAS,GAAGjB,EAAIiB,GAAG,KAAKd,EAAG,WAAWE,OAAO4B,OAAS,SAAUlF,GAAU,OAAOA,EAAOkB,KAAOiE,WAAa,GAAG9H,QAAU4F,EAAI5F,QAAQ8G,WAAalB,EAAIjG,UAAUE,WAAa+F,EAAI/F,WAAWE,QAAU6F,EAAI7F,QAAQH,gBAAkBgG,EAAIhG,gBAAgBmH,SAAW,IAAIJ,IAAIoB,OAASnC,EAAInB,mBAAmBrE,YAAYwF,EAAIoB,KAAKC,IAAI,YAAYC,GAAG,SAASc,EAAMrF,EAAQwE,GAAO,OAAQpB,EAAG,OAAOK,YAAY,4BAA4BL,EAAG,kBAAkBE,OAAO9H,KAAO,WAAawE,EAAOuB,MAA6G0B,EAAIqC,KAA1GlC,EAAG,YAAYY,IAAIC,MAAQ,WAAc,OAAOhB,EAAIJ,qBAAqB7C,OAAciD,EAAIiB,GAAG,QAAiBjB,EAAIiB,GAAG,KAAKd,EAAG,YAAYY,IAAIC,MAAQ,WAAc,OAAOhB,EAAIT,iBAAiBxC,OAAciD,EAAIiB,GAAG,QAAQjB,EAAIiB,GAAG,KAAKd,EAAG,YAAYY,IAAIC,MAAQ,WAAc,OAAOhB,EAAIH,mBAAmB9C,OAAciD,EAAIiB,GAAG,QAAQjB,EAAIiB,GAAG,KAAKd,EAAG,YAAYY,IAAIC,MAAQ,WAAc,OAAOhB,EAAIP,WAAW1C,OAAciD,EAAIiB,GAAG,WAAW,IAAI,WAAW,MAAM,KAAKjB,EAAIiB,GAAG,KAAKd,EAAG,WAAWE,OAAOhG,MAAQ,OAAOiI,cAAe,GAAOvB,IAAIwB,GAAKvC,EAAIhE,aAAawG,OAASxC,EAAIrD,kBAAkB8D,OAAO5C,MAAOmC,EAAI5H,YAAasI,SAAS,SAAUC,GAAMX,EAAI5H,YAAYuI,GAAKC,WAAW,iBAAiBT,EAAG,UAAUsC,IAAI,WAAWpC,OAAOI,MAAQT,EAAInH,SAAS6J,MAAQ1C,EAAIjH,SAAS4J,cAAc,MAAMxC,EAAG,eAAeE,OAAOzC,MAAQ,KAAKgF,KAAO,iBAAiBzC,EAAG,WAAWE,OAAOS,KAAO,QAAQL,OAAO5C,MAAOmC,EAAInH,SAASC,YAAa4H,SAAS,SAAUC,GAAMX,EAAI6C,KAAK7C,EAAInH,SAAU,cAAe8H,IAAMC,WAAW,2BAA2B,IAAI,IAAI,GAAGZ,EAAIiB,GAAG,KAAKd,EAAG,WAAWE,OAAOhG,MAAQ,OAAOiI,cAAe,GAAOvB,IAAIwB,GAAKvC,EAAIb,cAAcqD,OAASxC,EAAIV,mBAAmBmB,OAAO5C,MAAOmC,EAAIxG,aAAckH,SAAS,SAAUC,GAAMX,EAAIxG,aAAamH,GAAKC,WAAW,kBAAkBT,EAAG,UAAUsC,IAAI,YAAYpC,OAAOI,MAAQT,EAAItG,UAAUgJ,MAAQ1C,EAAInG,UAAU8I,cAAc,MAAMxC,EAAG,eAAeE,OAAOzC,MAAQ,OAAOgF,KAAO,UAAUzC,EAAG,YAAY0B,aAAatH,MAAQ,QAAQ8F,OAAOyC,QAAU9C,EAAIvG,aAAagH,OAAO5C,MAAOmC,EAAItG,UAAUE,KAAM8G,SAAS,SAAUC,GAAMX,EAAI6C,KAAK7C,EAAItG,UAAW,OAAQiH,IAAMC,WAAW,qBAAqB,GAAGZ,EAAIiB,GAAG,KAAKd,EAAG,eAAeE,OAAOzC,MAAQ,KAAKgF,KAAO,gBAAgBzC,EAAG,WAAWE,OAAOS,KAAO,QAAQL,OAAO5C,MAAOmC,EAAItG,UAAUC,WAAY+G,SAAS,SAAUC,GAAMX,EAAI6C,KAAK7C,EAAItG,UAAW,aAAciH,IAAMC,WAAW,2BAA2B,IAAI,IAAI,IAAI,IAE/rImC,oBCClC,IAcAC,EAdyBvL,EAAQ,OAcjCwL,CACEnL,EACAoL,GATF,EAVA,SAAAC,GACE1L,EAAQ,SAaV,kBAEA,MAUe2L,EAAA,QAAAJ,EAAiB,+BC1BhCtL,EAAAG,QAA2BJ,EAAQ,OAARA,EAA0D,IAKrFuG,MAActG,EAAAC,EAAS,4PAA0P","file":"static/js/14.d3179ce9be8952b2ee65.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0f3ce647\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/less-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./project.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"6fa280fd\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader!./node_modules/css-loader!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-0f3ce647\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/less-loader/dist/cjs.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/views/project/project.vue\n// module id = dgF5\n// module chunks = 14","<template>\r\n  <div>\r\n    <v-card title=\"项目列表\" :bodyStyle=\"{padding: '0px'}\">\r\n      <div class=\"split-wrap\">\r\n        <v-split v-model=\"splitVal\">\r\n          <div slot=\"left\" class=\"split-pane split-pane-left\">\r\n            <div class=\"clearfix margin-bottom-15\">\r\n              <v-button type=\"primary\" size=\"small\" class=\"fr\" @click=\"handleAddProjectClick\">新增</v-button>\r\n            </div>\r\n            <v-list\r\n              :dataSource=\"projectListData\"\r\n              :loading=\"listLoading\"\r\n              bordered\r\n              size=\"small\"\r\n              :pagination=\"paginationProj\"\r\n            >\r\n              <v-list-item\r\n                slot=\"renderItem\"\r\n                slot-scope=\"item, index\"\r\n                key=\"item.pid\"\r\n                v-bind:class=\"{'selected': item.pid == selectedProject}\"\r\n                @click=\"handleSelectProj(item)\"\r\n              >\r\n                <v-button-group size=\"small\" slot=\"actions\">\r\n                  <v-button icon=\"edit\" @click=\"() => handleEidtProj(item)\"></v-button>\r\n                  <v-button icon=\"delete\" @click=\"() => handleDeleteProj(item)\"></v-button>\r\n                </v-button-group>\r\n                <span>{{item.projectname}}</span>\r\n              </v-list-item>\r\n            </v-list>\r\n          </div>\r\n          <div slot=\"right\" class=\"split-pane split-pane-right\">\r\n            <div class=\"clearfix margin-bottom-15\">\r\n              <div class=\"fl\">\r\n                <v-input-search\r\n                  placeholder=\"模块名称\"\r\n                  style=\"width: 200px\"\r\n                  @search=\"onSearch\"\r\n                  enterButton\r\n                  size=\"small\"\r\n                  v-model=\"searchModuleName\"\r\n                ></v-input-search>\r\n              </div>\r\n              <v-button type=\"primary\" size=\"small\" class=\"fr\" @click=\"handleAddModulesClick\">新增</v-button>\r\n            </div>\r\n            <v-table\r\n              :rowKey=\"record => record.mid\"\r\n              :indentSize=\"30\"\r\n              :columns=\"columns\"\r\n              :dataSource=\"tabledata\"\r\n              :pagination=\"pagination\"\r\n              :loading=\"loading\"\r\n              :expandedRowKeys=\"expandedRowKeys\"\r\n              @change=\"handleTableChange\"\r\n              bordered\r\n            >\r\n              <template slot=\"operation\" slot-scope=\"text, record, index\">\r\n                <div class=\"editable-row-operations\">\r\n                  <v-button-group size=\"small\">\r\n                    <v-button @click=\"() => handleAddChildModule(record)\" v-if=\"!record.child\">添加</v-button>\r\n                    <v-button @click=\"() => handleEidtModule(record)\">编辑</v-button>\r\n                    <v-button @click=\"() => handleDeleteModule(record)\">删除</v-button>\r\n                    <v-button @click=\"() => handleView(record)\">查看接口</v-button>\r\n                  </v-button-group>\r\n                </div>\r\n              </template>\r\n            </v-table>\r\n          </div>\r\n        </v-split>\r\n      </div>\r\n    </v-card>\r\n\r\n    <v-modal\r\n      title=\"项目名称\"\r\n      v-model=\"projVisible\"\r\n      @ok=\"handleProjOk\"\r\n      @cancel=\"handleProjCancel\"\r\n      :maskClosable=\"false\"\r\n    >\r\n      <v-form ref=\"formproj\" :model=\"formProj\" :rules=\"ruleProj\" :label-width=\"50\">\r\n        <v-form-item label=\"名称\" prop=\"projectname\">\r\n          <v-input type=\"text\" v-model=\"formProj.projectname\" />\r\n        </v-form-item>\r\n      </v-form>\r\n    </v-modal>\r\n\r\n    <v-modal\r\n      title=\"模块名称\"\r\n      v-model=\"modleVisible\"\r\n      @ok=\"handleModleOk\"\r\n      @cancel=\"handleModleCancel\"\r\n      :maskClosable=\"false\"\r\n    >\r\n      <v-form ref=\"formModle\" :model=\"formModle\" :rules=\"ruleModle\" :label-width=\"80\">\r\n        <v-form-item label=\"上级模块\" prop=\"pmid\">\r\n          <v-select v-model=\"formModle.pmid\" style=\"width:100%\" :options=\"pmidOptions\"></v-select>\r\n        </v-form-item>\r\n        <v-form-item label=\"名称\" prop=\"modulename\">\r\n          <v-input type=\"text\" v-model=\"formModle.modulename\" />\r\n        </v-form-item>\r\n      </v-form>\r\n    </v-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Util from \"@/libs/util\";\r\n\r\nconst convertSelectData = data => {\r\n  let result = [\r\n    {\r\n      label: \"顶级模块\",\r\n      value: \"0\"\r\n    }\r\n  ];\r\n  data.forEach(item => {\r\n    if (item.pmid === 0) {\r\n      result.push({\r\n        label: item.modulename,\r\n        value: item.mid.toString()\r\n      });\r\n    }\r\n  });\r\n  return result;\r\n};\r\n\r\nconst convertToTreeData = (data, pid) => {\r\n  let result = [],\r\n    temp;\r\n  for (let i = 0; i < data.length; i++) {\r\n    if (data[i].pmid === pid) {\r\n      let obj = data[i];\r\n      temp = convertToTreeData(data, data[i].mid);\r\n      if (temp.length > 0) {\r\n        temp.forEach(item => {\r\n          item.child = true;\r\n        });\r\n        obj.children = temp;\r\n      }\r\n      result.push(obj);\r\n    }\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nexport default {\r\n  name: \"project_index\",\r\n  data() {\r\n    return {\r\n      listLoading: false,\r\n      projVisible: false,\r\n      projModalType: true,\r\n      paginationProj: {\r\n        size: \"small\",\r\n        simple: true,\r\n        total: 1,\r\n        onChange: page => {\r\n          this.onShowSizeChange(page);\r\n        }\r\n      },\r\n      formProj: {\r\n        projectname: \"\"\r\n      },\r\n      ruleProj: {\r\n        projectname: [\r\n          {\r\n            required: true,\r\n            message: \"不能为空\",\r\n            trigger: \"blur\"\r\n          },\r\n          { pattern: /^(?!(\\s+$))/, message: \"不可为纯空格\" }\r\n        ]\r\n      },\r\n      projectListData: [],\r\n      selectedProject: \"\",\r\n\r\n      searchModuleName: \"\",\r\n      modModalType: true,\r\n      modleVisible: false,\r\n      pmidOptions: [],\r\n      formModle: {\r\n        modulename: \"\",\r\n        pmid: \"0\"\r\n      },\r\n      ruleModle: {\r\n        pmid: [\r\n          {\r\n            required: true,\r\n            message: \"不能为空\"\r\n          }\r\n        ],\r\n        modulename: [\r\n          {\r\n            required: true,\r\n            message: \"不能为空\",\r\n            trigger: \"blur\"\r\n          },\r\n          { pattern: /^(?!(\\s+$))/, message: \"不可为纯空格\" }\r\n        ]\r\n      },\r\n      splitVal: 0.3,\r\n      tabledata: [],\r\n      expandedRowKeys: [],\r\n      pagination: { showQuickJumper: true },\r\n      loading: false,\r\n      columns: [\r\n        {\r\n          title: \"模块名称\",\r\n          dataIndex: \"modulename\"\r\n        },\r\n        {\r\n          title: \"操作\",\r\n          width: \"30%\",\r\n          scopedSlots: { customRender: \"operation\" },\r\n          align: \"center\"\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.fetchProject(1);\r\n    },\r\n    //获取项目列表\r\n    fetchProject(pageNum) {\r\n      this.listLoading = true;\r\n      this.$request({\r\n        method: \"GET\",\r\n        url: `/projects`,\r\n        params: {\r\n          page: pageNum,\r\n          pagesize: 10\r\n        }\r\n      })\r\n        .then(res => {\r\n          if (res) {\r\n            this.projectListData = res.data.rows;\r\n            this.selectedProject = res.data.rows.length\r\n              ? res.data.rows[0].pid\r\n              : \"\";\r\n            this.paginationProj.total = res.data.totals;\r\n            this.fetch(1);\r\n          }\r\n          this.listLoading = false;\r\n        })\r\n        .catch(err => {\r\n          this.listLoading = false;\r\n        });\r\n    },\r\n    //新增项目\r\n    handleAddProjectClick() {\r\n      this.projModalType = true;\r\n      this.projVisible = true;\r\n    },\r\n    //项目新增确认\r\n    handleProjOk() {\r\n      this.$refs[\"formproj\"].validate(valid => {\r\n        if (valid) {\r\n          let params = {\r\n            projectname: this.formProj.projectname\r\n          };\r\n          let method = \"POST\";\r\n          let url = \"/projects\";\r\n          if (!this.projModalType) {\r\n            method = \"PATCH\";\r\n            url = `/projects/${this.formProj.pid}`;\r\n          } else {\r\n            params.createtime = Util.formatDate(new Date());\r\n          }\r\n          this.$request({\r\n            method,\r\n            url,\r\n            data: params\r\n          }).then(res => {\r\n            if (res) {\r\n              this.$message.success(res.message);\r\n              this.fetchProject(1);\r\n              this.handleProjCancel();\r\n            }\r\n          });\r\n        } else {\r\n          this.$message.error(\"验证失败!\");\r\n        }\r\n      });\r\n    },\r\n    //项目新增取消\r\n    handleProjCancel() {\r\n      this.$refs[\"formproj\"].resetFields();\r\n      this.projVisible = false;\r\n    },\r\n    //项目编辑\r\n    handleEidtProj(record) {\r\n      this.projModalType = false;\r\n      this.projVisible = true;\r\n      this.$nextTick(() => {\r\n        this.formProj = Object.assign({}, this.formProj, record);\r\n      });\r\n    },\r\n    //项目删除\r\n    handleDeleteProj(record) {\r\n      let _this = this;\r\n      this.$confirm({\r\n        title: \"提示\",\r\n        content: \"删除项目将会移除其下面所有的模块及接口且不可恢复\",\r\n        onOk() {\r\n          _this\r\n            .$request({\r\n              method: \"POST\",\r\n              url: \"/projects/delete\",\r\n              data: {\r\n                id: record.pid\r\n              }\r\n            })\r\n            .then(res => {\r\n              if (res) {\r\n                _this.$message.success(res.message);\r\n                _this.fetchProject(1);\r\n              }\r\n            });\r\n        }\r\n      });\r\n    },\r\n    //选择项目\r\n    handleSelectProj(record) {\r\n      this.selectedProject = record.pid;\r\n      this.fetch(1);\r\n    },\r\n    //项目分页\r\n    onShowSizeChange(page) {\r\n      this.fetchProject(page);\r\n    },\r\n    //获取表格数据   pageNum  当前请求的页码\r\n    fetch(pageNum) {\r\n      this.loading = true;\r\n      this.$request({\r\n        method: \"GET\",\r\n        url: `/modules`,\r\n        params: {\r\n          modulename: this.searchModuleName,\r\n          projectid: this.selectedProject,\r\n          page: pageNum,\r\n          pagesize: 10\r\n        }\r\n      }).then(res => {\r\n        this.pmidOptions = convertSelectData(res.data.rows);\r\n        this.tabledata = convertToTreeData(res.data.rows, 0);\r\n        this.expandedRowKeys = this.tabledata.map(item=>{\r\n          if(item.children){\r\n            return item.mid\r\n          }\r\n        }).filter(item=>{\r\n          return item != undefined\r\n        })\r\n        this.pagination = Util.pager(this, this.pagination, {\r\n          current: pageNum,\r\n          total: res.data.totals\r\n        });\r\n        this.loading = false;\r\n      });\r\n    },\r\n    //表格分页\r\n    handleTableChange(p,t,r) {\r\n      this.fetch(p.current);\r\n    },\r\n    //新增模块\r\n    handleAddModulesClick() {\r\n      this.modModalType = true;\r\n      this.modleVisible = true;\r\n    },\r\n    //搜索\r\n    onSearch() {\r\n      this.fetch(1);\r\n    },\r\n    //模块新增确认\r\n    handleModleOk() {\r\n      this.$refs[\"formModle\"].validate(valid => {\r\n        if (valid) {\r\n          let params = {\r\n            modulename: this.formModle.modulename,\r\n            projectid: this.selectedProject,\r\n            pmid: parseInt(this.formModle.pmid)\r\n          };\r\n          let method = \"POST\";\r\n          let url = \"/modules\";\r\n          if (!this.modModalType) {\r\n            method = \"PATCH\";\r\n            url = `/modules/${this.formModle.mid}`;\r\n          } else {\r\n            params.createtime = Util.formatDate(new Date());\r\n          }\r\n\r\n          this.$request({\r\n            method,\r\n            url,\r\n            data: params\r\n          }).then(res => {\r\n            if (res) {\r\n              this.$message.success(res.message);\r\n              this.fetch(1);\r\n              this.handleModleCancel();\r\n            }\r\n          });\r\n        } else {\r\n          this.$message.error(\"验证失败!\");\r\n        }\r\n      });\r\n    },\r\n    //模块新增取消\r\n    handleModleCancel() {\r\n      this.$refs[\"formModle\"].resetFields();\r\n      this.modleVisible = false;\r\n    },\r\n    //编辑模块\r\n    handleEidtModule(record) {\r\n      this.modModalType = false;\r\n      this.modleVisible = true;\r\n      this.$nextTick(() => {\r\n        record.pmid = record.pmid.toString();\r\n        this.formModle = Object.assign({}, this.formModle, record);\r\n      });\r\n    },\r\n    //查看接口\r\n    handleView(record) {\r\n      this.$router.push({\r\n        name: \"interface_index\",\r\n        query: {\r\n          pid: this.selectedProject,\r\n          mid: record.mid\r\n        }\r\n      });\r\n    },\r\n    //添加子级模块\r\n    handleAddChildModule(record) {\r\n      this.modModalType = true;\r\n      this.modleVisible = true;\r\n      this.formModle.pmid = record.mid.toString()\r\n    },\r\n    //删除模块\r\n    handleDeleteModule(record) {\r\n      let _this = this;\r\n      this.$confirm({\r\n        title: \"提示\",\r\n        content: \"删除模块将会移除其下面所有的接口且不可恢复?\",\r\n        onOk() {\r\n          _this\r\n            .$request({\r\n              method: \"POST\",\r\n              url: \"/modules/delete\",\r\n              data: {\r\n                id: record.mid\r\n              }\r\n            })\r\n            .then(res => {\r\n              if (res) {\r\n                _this.$message.success(res.message);\r\n                _this.fetch(1);\r\n              }\r\n            });\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.vcu-list-item {\r\n  cursor: pointer;\r\n  &.selected {\r\n    background: #f0f0f0;\r\n  }\r\n}\r\n.split-wrap {\r\n  height: 750px;\r\n  .split-pane {\r\n    padding: 20px;\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/project/project.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-card',{attrs:{\"title\":\"项目列表\",\"bodyStyle\":{padding: '0px'}}},[_c('div',{staticClass:\"split-wrap\"},[_c('v-split',{model:{value:(_vm.splitVal),callback:function ($$v) {_vm.splitVal=$$v},expression:\"splitVal\"}},[_c('div',{staticClass:\"split-pane split-pane-left\",attrs:{\"slot\":\"left\"},slot:\"left\"},[_c('div',{staticClass:\"clearfix margin-bottom-15\"},[_c('v-button',{staticClass:\"fr\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.handleAddProjectClick}},[_vm._v(\"新增\")])],1),_vm._v(\" \"),_c('v-list',{attrs:{\"dataSource\":_vm.projectListData,\"loading\":_vm.listLoading,\"bordered\":\"\",\"size\":\"small\",\"pagination\":_vm.paginationProj},scopedSlots:_vm._u([{key:\"renderItem\",fn:function(item, index){return _c('v-list-item',{key:\"item.pid\",class:{'selected': item.pid == _vm.selectedProject},on:{\"click\":function($event){_vm.handleSelectProj(item)}}},[_c('v-button-group',{attrs:{\"slot\":\"actions\",\"size\":\"small\"},slot:\"actions\"},[_c('v-button',{attrs:{\"icon\":\"edit\"},on:{\"click\":function () { return _vm.handleEidtProj(item); }}}),_vm._v(\" \"),_c('v-button',{attrs:{\"icon\":\"delete\"},on:{\"click\":function () { return _vm.handleDeleteProj(item); }}})],1),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item.projectname))])],1)}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"split-pane split-pane-right\",attrs:{\"slot\":\"right\"},slot:\"right\"},[_c('div',{staticClass:\"clearfix margin-bottom-15\"},[_c('div',{staticClass:\"fl\"},[_c('v-input-search',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"模块名称\",\"enterButton\":\"\",\"size\":\"small\"},on:{\"search\":_vm.onSearch},model:{value:(_vm.searchModuleName),callback:function ($$v) {_vm.searchModuleName=$$v},expression:\"searchModuleName\"}})],1),_vm._v(\" \"),_c('v-button',{staticClass:\"fr\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.handleAddModulesClick}},[_vm._v(\"新增\")])],1),_vm._v(\" \"),_c('v-table',{attrs:{\"rowKey\":function (record) { return record.mid; },\"indentSize\":30,\"columns\":_vm.columns,\"dataSource\":_vm.tabledata,\"pagination\":_vm.pagination,\"loading\":_vm.loading,\"expandedRowKeys\":_vm.expandedRowKeys,\"bordered\":\"\"},on:{\"change\":_vm.handleTableChange},scopedSlots:_vm._u([{key:\"operation\",fn:function(text, record, index){return [_c('div',{staticClass:\"editable-row-operations\"},[_c('v-button-group',{attrs:{\"size\":\"small\"}},[(!record.child)?_c('v-button',{on:{\"click\":function () { return _vm.handleAddChildModule(record); }}},[_vm._v(\"添加\")]):_vm._e(),_vm._v(\" \"),_c('v-button',{on:{\"click\":function () { return _vm.handleEidtModule(record); }}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('v-button',{on:{\"click\":function () { return _vm.handleDeleteModule(record); }}},[_vm._v(\"删除\")]),_vm._v(\" \"),_c('v-button',{on:{\"click\":function () { return _vm.handleView(record); }}},[_vm._v(\"查看接口\")])],1)],1)]}}])})],1)])],1)]),_vm._v(\" \"),_c('v-modal',{attrs:{\"title\":\"项目名称\",\"maskClosable\":false},on:{\"ok\":_vm.handleProjOk,\"cancel\":_vm.handleProjCancel},model:{value:(_vm.projVisible),callback:function ($$v) {_vm.projVisible=$$v},expression:\"projVisible\"}},[_c('v-form',{ref:\"formproj\",attrs:{\"model\":_vm.formProj,\"rules\":_vm.ruleProj,\"label-width\":50}},[_c('v-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"projectname\"}},[_c('v-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.formProj.projectname),callback:function ($$v) {_vm.$set(_vm.formProj, \"projectname\", $$v)},expression:\"formProj.projectname\"}})],1)],1)],1),_vm._v(\" \"),_c('v-modal',{attrs:{\"title\":\"模块名称\",\"maskClosable\":false},on:{\"ok\":_vm.handleModleOk,\"cancel\":_vm.handleModleCancel},model:{value:(_vm.modleVisible),callback:function ($$v) {_vm.modleVisible=$$v},expression:\"modleVisible\"}},[_c('v-form',{ref:\"formModle\",attrs:{\"model\":_vm.formModle,\"rules\":_vm.ruleModle,\"label-width\":80}},[_c('v-form-item',{attrs:{\"label\":\"上级模块\",\"prop\":\"pmid\"}},[_c('v-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"options\":_vm.pmidOptions},model:{value:(_vm.formModle.pmid),callback:function ($$v) {_vm.$set(_vm.formModle, \"pmid\", $$v)},expression:\"formModle.pmid\"}})],1),_vm._v(\" \"),_c('v-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"modulename\"}},[_c('v-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.formModle.modulename),callback:function ($$v) {_vm.$set(_vm.formModle, \"modulename\", $$v)},expression:\"formModle.modulename\"}})],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n// WEBPACK FOOTER //\n// ./src/views/project/project.vue","function injectStyle (ssrContext) {\n  require(\"!!vue-style-loader!css-loader!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0f3ce647\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./project.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./project.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./project.vue\"\n/* template */\nimport __vue_template__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0f3ce647\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./project.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0f3ce647\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/project/project.vue\n// module id = null\n// module chunks = ","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.vcu-list-item[data-v-0f3ce647] {\\n  cursor: pointer;\\n}\\n.vcu-list-item.selected[data-v-0f3ce647] {\\n  background: #f0f0f0;\\n}\\n.split-wrap[data-v-0f3ce647] {\\n  height: 750px;\\n}\\n.split-wrap .split-pane[data-v-0f3ce647] {\\n  padding: 20px;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-0f3ce647\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/less-loader/dist/cjs.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/views/project/project.vue\n// module id = zKzo\n// module chunks = 14"],"sourceRoot":""}