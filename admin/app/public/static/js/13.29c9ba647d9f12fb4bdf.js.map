{"version":3,"sources":["webpack:///./src/views/project/project.vue?9813","webpack:///src/views/project/project.vue","webpack:///./src/views/project/project.vue","webpack:///./src/views/project/project.vue?3063","webpack:///./src/views/project/project.vue?bdcd"],"names":["content","__webpack_require__","module","i","locals","exports","project","name","data","_this2","this","listLoading","projVisible","projModalType","paginationProj","size","simple","total","onChange","page","onShowSizeChange","formProj","projectname","ruleProj","required","message","trigger","pattern","projectListData","selectedProject","searchModuleName","modModalType","modleVisible","pmidOptions","formModle","modulename","pmid","ruleModle","splitVal","tabledata","pagination","showQuickJumper","loading","columns","title","dataIndex","width","scopedSlots","customRender","align","mounted","init","methods","fetchProject","pageNum","_this3","$request","method","url","params","pagesize","then","res","rows","length","pid","totals","fetch","catch","err","handleAddProjectClick","handleProjOk","_this4","$refs","validate","valid","createtime","util","formatDate","Date","$message","success","handleProjCancel","error","resetFields","handleEidtProj","record","_this5","$nextTick","assign_default","handleDeleteProj","_this","$confirm","onOk","id","handleSelectProj","_this6","projectid","result","label","value","forEach","item","push","mid","toString","convertToTreeData","temp","obj","child","children","pager","current","handleTableChange","p","handleAddModulesClick","onSearch","handleModleOk","_this7","parseInt","handleModleCancel","handleEidtModule","_this8","handleView","$router","query","handleAddChildModule","handleDeleteModule","esExports","render","_vm","_h","$createElement","_c","_self","attrs","bodyStyle","padding","staticClass","model","callback","$$v","expression","slot","type","on","click","_v","dataSource","bordered","_u","key","fn","index","class","selected","$event","icon","_s","staticStyle","placeholder","enterButton","search","rowKey","indentSize","change","text","_e","maskClosable","ok","cancel","ref","rules","label-width","prop","$set","options","staticRenderFns","Component","normalizeComponent","project_project","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/13.29c9ba647d9f12fb4bdf.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-17cb43ee\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/less-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./project.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"fb7c1d32\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader!./node_modules/css-loader!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-17cb43ee\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/less-loader/dist/cjs.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/views/project/project.vue\n// module id = J+r5\n// module chunks = 13","<template>\r\n  <div>\r\n    <v-card title=\"项目列表\" :bodyStyle=\"{padding: '0px'}\">\r\n      <div class=\"split-wrap\">\r\n        <v-split v-model=\"splitVal\">\r\n          <div slot=\"left\" class=\"split-pane split-pane-left\">\r\n            <div class=\"clearfix margin-bottom-15\">\r\n              <v-button type=\"primary\" size=\"small\" class=\"fr\" @click=\"handleAddProjectClick\">新增</v-button>\r\n            </div>\r\n            <v-list\r\n              :dataSource=\"projectListData\"\r\n              :loading=\"listLoading\"\r\n              bordered\r\n              size=\"small\"\r\n              :pagination=\"paginationProj\"\r\n            >\r\n              <v-list-item\r\n                slot=\"renderItem\"\r\n                slot-scope=\"item, index\"\r\n                key=\"item.pid\"\r\n                v-bind:class=\"{'selected': item.pid == selectedProject}\"\r\n                @click=\"handleSelectProj(item)\"\r\n              >\r\n                <v-button-group size=\"small\" slot=\"actions\">\r\n                  <v-button icon=\"edit\" @click=\"() => handleEidtProj(item)\"></v-button>\r\n                  <v-button icon=\"delete\" @click=\"() => handleDeleteProj(item)\"></v-button>\r\n                </v-button-group>\r\n                <span>{{item.projectname}}</span>\r\n              </v-list-item>\r\n            </v-list>\r\n          </div>\r\n          <div slot=\"right\" class=\"split-pane split-pane-right\">\r\n            <div class=\"clearfix margin-bottom-15\">\r\n              <div class=\"fl\">\r\n                <v-input-search\r\n                  placeholder=\"模块名称\"\r\n                  style=\"width: 200px\"\r\n                  @search=\"onSearch\"\r\n                  enterButton\r\n                  size=\"small\"\r\n                  v-model=\"searchModuleName\"\r\n                ></v-input-search>\r\n              </div>\r\n              <v-button type=\"primary\" size=\"small\" class=\"fr\" @click=\"handleAddModulesClick\">新增</v-button>\r\n            </div>\r\n            <v-table\r\n              :rowKey=\"record => record.mid\"\r\n              :indentSize=\"30\"\r\n              :columns=\"columns\"\r\n              :dataSource=\"tabledata\"\r\n              :pagination=\"pagination\"\r\n              :loading=\"loading\"\r\n              @change=\"handleTableChange\"\r\n              bordered\r\n            >\r\n              <template slot=\"operation\" slot-scope=\"text, record, index\">\r\n                <div class=\"editable-row-operations\">\r\n                  <v-button-group size=\"small\">\r\n                    <v-button @click=\"() => handleAddChildModule(record)\" v-if=\"!record.child\">添加</v-button>\r\n                    <v-button @click=\"() => handleEidtModule(record)\">编辑</v-button>\r\n                    <v-button @click=\"() => handleDeleteModule(record)\">删除</v-button>\r\n                    <v-button @click=\"() => handleView(record)\">查看接口</v-button>\r\n                  </v-button-group>\r\n                </div>\r\n              </template>\r\n            </v-table>\r\n          </div>\r\n        </v-split>\r\n      </div>\r\n    </v-card>\r\n\r\n    <v-modal\r\n      title=\"项目名称\"\r\n      v-model=\"projVisible\"\r\n      @ok=\"handleProjOk\"\r\n      @cancel=\"handleProjCancel\"\r\n      :maskClosable=\"false\"\r\n    >\r\n      <v-form ref=\"formproj\" :model=\"formProj\" :rules=\"ruleProj\" :label-width=\"50\">\r\n        <v-form-item label=\"名称\" prop=\"projectname\">\r\n          <v-input type=\"text\" v-model=\"formProj.projectname\" />\r\n        </v-form-item>\r\n      </v-form>\r\n    </v-modal>\r\n\r\n    <v-modal\r\n      title=\"模块名称\"\r\n      v-model=\"modleVisible\"\r\n      @ok=\"handleModleOk\"\r\n      @cancel=\"handleModleCancel\"\r\n      :maskClosable=\"false\"\r\n    >\r\n      <v-form ref=\"formModle\" :model=\"formModle\" :rules=\"ruleModle\" :label-width=\"80\">\r\n        <v-form-item label=\"上级模块\" prop=\"pmid\">\r\n          <v-select v-model=\"formModle.pmid\" style=\"width:100%\" :options=\"pmidOptions\"></v-select>\r\n        </v-form-item>\r\n        <v-form-item label=\"名称\" prop=\"modulename\">\r\n          <v-input type=\"text\" v-model=\"formModle.modulename\" />\r\n        </v-form-item>\r\n      </v-form>\r\n    </v-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Util from \"@/libs/util\";\r\n\r\nconst convertSelectData = data => {\r\n  let result = [\r\n    {\r\n      label: \"顶级模块\",\r\n      value: \"0\"\r\n    }\r\n  ];\r\n  data.forEach(item => {\r\n    if (item.pmid === 0) {\r\n      result.push({\r\n        label: item.modulename,\r\n        value: item.mid.toString()\r\n      });\r\n    }\r\n  });\r\n  return result;\r\n};\r\n\r\nconst convertToTreeData = (data, pid) => {\r\n  let result = [],\r\n    temp;\r\n  for (let i = 0; i < data.length; i++) {\r\n    if (data[i].pmid === pid) {\r\n      let obj = data[i];\r\n      temp = convertToTreeData(data, data[i].mid);\r\n      if (temp.length > 0) {\r\n        temp.forEach(item => {\r\n          item.child = true;\r\n        });\r\n        obj.children = temp;\r\n      }\r\n      result.push(obj);\r\n    }\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nexport default {\r\n  name: \"project_index\",\r\n  data() {\r\n    return {\r\n      listLoading: false,\r\n      projVisible: false,\r\n      projModalType: true,\r\n      paginationProj: {\r\n        size: \"small\",\r\n        simple: true,\r\n        total: 1,\r\n        onChange: page => {\r\n          this.onShowSizeChange(page);\r\n        }\r\n      },\r\n      formProj: {\r\n        projectname: \"\"\r\n      },\r\n      ruleProj: {\r\n        projectname: [\r\n          {\r\n            required: true,\r\n            message: \"不能为空\",\r\n            trigger: \"blur\"\r\n          },\r\n          { pattern: /^(?!(\\s+$))/, message: \"不可为纯空格\" }\r\n        ]\r\n      },\r\n      projectListData: [],\r\n      selectedProject: \"\",\r\n\r\n      searchModuleName: \"\",\r\n      modModalType: true,\r\n      modleVisible: false,\r\n      pmidOptions: [],\r\n      formModle: {\r\n        modulename: \"\",\r\n        pmid: \"0\"\r\n      },\r\n      ruleModle: {\r\n        pmid: [\r\n          {\r\n            required: true,\r\n            message: \"不能为空\"\r\n          }\r\n        ],\r\n        modulename: [\r\n          {\r\n            required: true,\r\n            message: \"不能为空\",\r\n            trigger: \"blur\"\r\n          },\r\n          { pattern: /^(?!(\\s+$))/, message: \"不可为纯空格\" }\r\n        ]\r\n      },\r\n      splitVal: 0.3,\r\n      tabledata: [],\r\n      pagination: { showQuickJumper: true },\r\n      loading: false,\r\n      columns: [\r\n        {\r\n          title: \"模块名称\",\r\n          dataIndex: \"modulename\"\r\n        },\r\n        {\r\n          title: \"操作\",\r\n          width: \"30%\",\r\n          scopedSlots: { customRender: \"operation\" },\r\n          align: \"center\"\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.fetchProject(1);\r\n    },\r\n    //获取项目列表\r\n    fetchProject(pageNum) {\r\n      this.listLoading = true;\r\n      this.$request({\r\n        method: \"GET\",\r\n        url: `/projects`,\r\n        params: {\r\n          page: pageNum,\r\n          pagesize: 10\r\n        }\r\n      })\r\n        .then(res => {\r\n          if (res) {\r\n            this.projectListData = res.data.rows;\r\n            this.selectedProject = res.data.rows.length\r\n              ? res.data.rows[0].pid\r\n              : \"\";\r\n            this.paginationProj.total = res.data.totals;\r\n            this.fetch(1);\r\n          }\r\n          this.listLoading = false;\r\n        })\r\n        .catch(err => {\r\n          this.listLoading = false;\r\n        });\r\n    },\r\n    //新增项目\r\n    handleAddProjectClick() {\r\n      this.projModalType = true;\r\n      this.projVisible = true;\r\n    },\r\n    //项目新增确认\r\n    handleProjOk() {\r\n      this.$refs[\"formproj\"].validate(valid => {\r\n        if (valid) {\r\n          let params = {\r\n            projectname: this.formProj.projectname\r\n          };\r\n          let method = \"POST\";\r\n          let url = \"/projects\";\r\n          if (!this.projModalType) {\r\n            method = \"PATCH\";\r\n            url = `/projects/${this.formProj.pid}`;\r\n          } else {\r\n            params.createtime = Util.formatDate(new Date());\r\n          }\r\n          this.$request({\r\n            method,\r\n            url,\r\n            data: params\r\n          }).then(res => {\r\n            if (res) {\r\n              this.$message.success(res.message);\r\n              this.fetchProject(1);\r\n              this.handleProjCancel();\r\n            }\r\n          });\r\n        } else {\r\n          this.$message.error(\"验证失败!\");\r\n        }\r\n      });\r\n    },\r\n    //项目新增取消\r\n    handleProjCancel() {\r\n      this.$refs[\"formproj\"].resetFields();\r\n      this.projVisible = false;\r\n    },\r\n    //项目编辑\r\n    handleEidtProj(record) {\r\n      this.projModalType = false;\r\n      this.projVisible = true;\r\n      this.$nextTick(() => {\r\n        this.formProj = Object.assign({}, this.formProj, record);\r\n      });\r\n    },\r\n    //项目删除\r\n    handleDeleteProj(record) {\r\n      let _this = this;\r\n      this.$confirm({\r\n        title: \"提示\",\r\n        content: \"删除项目将会移除其下面所有的模块及接口且不可恢复\",\r\n        onOk() {\r\n          _this\r\n            .$request({\r\n              method: \"POST\",\r\n              url: \"/projects/delete\",\r\n              data: {\r\n                id: record.pid\r\n              }\r\n            })\r\n            .then(res => {\r\n              if (res) {\r\n                _this.$message.success(res.message);\r\n                _this.fetchProject(1);\r\n              }\r\n            });\r\n        }\r\n      });\r\n    },\r\n    //选择项目\r\n    handleSelectProj(record) {\r\n      this.selectedProject = record.pid;\r\n      this.fetch(1);\r\n    },\r\n    //项目分页\r\n    onShowSizeChange(page) {\r\n      this.fetchProject(page);\r\n    },\r\n    //获取表格数据   pageNum  当前请求的页码\r\n    fetch(pageNum) {\r\n      this.loading = true;\r\n      this.$request({\r\n        method: \"GET\",\r\n        url: `/modules`,\r\n        params: {\r\n          modulename: this.searchModuleName,\r\n          projectid: this.selectedProject,\r\n          page: pageNum,\r\n          pagesize: 10\r\n        }\r\n      }).then(res => {\r\n        this.pmidOptions = convertSelectData(res.data.rows);\r\n        this.tabledata = convertToTreeData(res.data.rows, 0);\r\n        this.pagination = Util.pager(this, this.pagination, {\r\n          current: pageNum,\r\n          total: res.data.totals\r\n        });\r\n        this.loading = false;\r\n      });\r\n    },\r\n    //表格分页\r\n    handleTableChange(p) {\r\n      this.fetch(p.current);\r\n    },\r\n    //新增模块\r\n    handleAddModulesClick() {\r\n      this.modModalType = true;\r\n      this.modleVisible = true;\r\n    },\r\n    //搜索\r\n    onSearch() {\r\n      this.fetch(1);\r\n    },\r\n    //模块新增确认\r\n    handleModleOk() {\r\n      this.$refs[\"formModle\"].validate(valid => {\r\n        if (valid) {\r\n          let params = {\r\n            modulename: this.formModle.modulename,\r\n            projectid: this.selectedProject,\r\n            pmid: parseInt(this.formModle.pmid)\r\n          };\r\n          let method = \"POST\";\r\n          let url = \"/modules\";\r\n          if (!this.modModalType) {\r\n            method = \"PATCH\";\r\n            url = `/modules/${this.formModle.mid}`;\r\n          } else {\r\n            params.createtime = Util.formatDate(new Date());\r\n          }\r\n\r\n          this.$request({\r\n            method,\r\n            url,\r\n            data: params\r\n          }).then(res => {\r\n            if (res) {\r\n              this.$message.success(res.message);\r\n              this.fetch(1);\r\n              this.handleModleCancel();\r\n            }\r\n          });\r\n        } else {\r\n          this.$message.error(\"验证失败!\");\r\n        }\r\n      });\r\n    },\r\n    //模块新增取消\r\n    handleModleCancel() {\r\n      this.$refs[\"formModle\"].resetFields();\r\n      this.modleVisible = false;\r\n    },\r\n    //编辑模块\r\n    handleEidtModule(record) {\r\n      this.modModalType = false;\r\n      this.modleVisible = true;\r\n      this.$nextTick(() => {\r\n        record.pmid = record.pmid.toString();\r\n        this.formModle = Object.assign({}, this.formModle, record);\r\n      });\r\n    },\r\n    //查看接口\r\n    handleView(record) {\r\n      this.$router.push({\r\n        name: \"interface_index\",\r\n        query: {\r\n          pid: this.selectedProject,\r\n          mid: record.mid\r\n        }\r\n      });\r\n    },\r\n    //添加子级模块\r\n    handleAddChildModule(record) {\r\n      this.modModalType = true;\r\n      this.modleVisible = true;\r\n      this.formModle.pmid = record.mid.toString()\r\n    },\r\n    //删除模块\r\n    handleDeleteModule(record) {\r\n      let _this = this;\r\n      this.$confirm({\r\n        title: \"提示\",\r\n        content: \"删除模块将会移除其下面所有的接口且不可恢复?\",\r\n        onOk() {\r\n          _this\r\n            .$request({\r\n              method: \"POST\",\r\n              url: \"/modules/delete\",\r\n              data: {\r\n                id: record.mid\r\n              }\r\n            })\r\n            .then(res => {\r\n              if (res) {\r\n                _this.$message.success(res.message);\r\n                _this.fetch(1);\r\n              }\r\n            });\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.vcu-list-item {\r\n  cursor: pointer;\r\n  &.selected {\r\n    background: #f0f0f0;\r\n  }\r\n}\r\n.split-wrap {\r\n  height: 750px;\r\n  .split-pane {\r\n    padding: 20px;\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/project/project.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-card',{attrs:{\"title\":\"项目列表\",\"bodyStyle\":{padding: '0px'}}},[_c('div',{staticClass:\"split-wrap\"},[_c('v-split',{model:{value:(_vm.splitVal),callback:function ($$v) {_vm.splitVal=$$v},expression:\"splitVal\"}},[_c('div',{staticClass:\"split-pane split-pane-left\",attrs:{\"slot\":\"left\"},slot:\"left\"},[_c('div',{staticClass:\"clearfix margin-bottom-15\"},[_c('v-button',{staticClass:\"fr\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.handleAddProjectClick}},[_vm._v(\"新增\")])],1),_vm._v(\" \"),_c('v-list',{attrs:{\"dataSource\":_vm.projectListData,\"loading\":_vm.listLoading,\"bordered\":\"\",\"size\":\"small\",\"pagination\":_vm.paginationProj},scopedSlots:_vm._u([{key:\"renderItem\",fn:function(item, index){return _c('v-list-item',{key:\"item.pid\",class:{'selected': item.pid == _vm.selectedProject},on:{\"click\":function($event){_vm.handleSelectProj(item)}}},[_c('v-button-group',{attrs:{\"slot\":\"actions\",\"size\":\"small\"},slot:\"actions\"},[_c('v-button',{attrs:{\"icon\":\"edit\"},on:{\"click\":function () { return _vm.handleEidtProj(item); }}}),_vm._v(\" \"),_c('v-button',{attrs:{\"icon\":\"delete\"},on:{\"click\":function () { return _vm.handleDeleteProj(item); }}})],1),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item.projectname))])],1)}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"split-pane split-pane-right\",attrs:{\"slot\":\"right\"},slot:\"right\"},[_c('div',{staticClass:\"clearfix margin-bottom-15\"},[_c('div',{staticClass:\"fl\"},[_c('v-input-search',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"模块名称\",\"enterButton\":\"\",\"size\":\"small\"},on:{\"search\":_vm.onSearch},model:{value:(_vm.searchModuleName),callback:function ($$v) {_vm.searchModuleName=$$v},expression:\"searchModuleName\"}})],1),_vm._v(\" \"),_c('v-button',{staticClass:\"fr\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.handleAddModulesClick}},[_vm._v(\"新增\")])],1),_vm._v(\" \"),_c('v-table',{attrs:{\"rowKey\":function (record) { return record.mid; },\"indentSize\":30,\"columns\":_vm.columns,\"dataSource\":_vm.tabledata,\"pagination\":_vm.pagination,\"loading\":_vm.loading,\"bordered\":\"\"},on:{\"change\":_vm.handleTableChange},scopedSlots:_vm._u([{key:\"operation\",fn:function(text, record, index){return [_c('div',{staticClass:\"editable-row-operations\"},[_c('v-button-group',{attrs:{\"size\":\"small\"}},[(!record.child)?_c('v-button',{on:{\"click\":function () { return _vm.handleAddChildModule(record); }}},[_vm._v(\"添加\")]):_vm._e(),_vm._v(\" \"),_c('v-button',{on:{\"click\":function () { return _vm.handleEidtModule(record); }}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('v-button',{on:{\"click\":function () { return _vm.handleDeleteModule(record); }}},[_vm._v(\"删除\")]),_vm._v(\" \"),_c('v-button',{on:{\"click\":function () { return _vm.handleView(record); }}},[_vm._v(\"查看接口\")])],1)],1)]}}])})],1)])],1)]),_vm._v(\" \"),_c('v-modal',{attrs:{\"title\":\"项目名称\",\"maskClosable\":false},on:{\"ok\":_vm.handleProjOk,\"cancel\":_vm.handleProjCancel},model:{value:(_vm.projVisible),callback:function ($$v) {_vm.projVisible=$$v},expression:\"projVisible\"}},[_c('v-form',{ref:\"formproj\",attrs:{\"model\":_vm.formProj,\"rules\":_vm.ruleProj,\"label-width\":50}},[_c('v-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"projectname\"}},[_c('v-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.formProj.projectname),callback:function ($$v) {_vm.$set(_vm.formProj, \"projectname\", $$v)},expression:\"formProj.projectname\"}})],1)],1)],1),_vm._v(\" \"),_c('v-modal',{attrs:{\"title\":\"模块名称\",\"maskClosable\":false},on:{\"ok\":_vm.handleModleOk,\"cancel\":_vm.handleModleCancel},model:{value:(_vm.modleVisible),callback:function ($$v) {_vm.modleVisible=$$v},expression:\"modleVisible\"}},[_c('v-form',{ref:\"formModle\",attrs:{\"model\":_vm.formModle,\"rules\":_vm.ruleModle,\"label-width\":80}},[_c('v-form-item',{attrs:{\"label\":\"上级模块\",\"prop\":\"pmid\"}},[_c('v-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"options\":_vm.pmidOptions},model:{value:(_vm.formModle.pmid),callback:function ($$v) {_vm.$set(_vm.formModle, \"pmid\", $$v)},expression:\"formModle.pmid\"}})],1),_vm._v(\" \"),_c('v-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"modulename\"}},[_c('v-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.formModle.modulename),callback:function ($$v) {_vm.$set(_vm.formModle, \"modulename\", $$v)},expression:\"formModle.modulename\"}})],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n// WEBPACK FOOTER //\n// ./src/views/project/project.vue","function injectStyle (ssrContext) {\n  require(\"!!vue-style-loader!css-loader!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-17cb43ee\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./project.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./project.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./project.vue\"\n/* template */\nimport __vue_template__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-17cb43ee\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./project.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-17cb43ee\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/project/project.vue\n// module id = null\n// module chunks = ","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.vcu-list-item[data-v-17cb43ee] {\\n  cursor: pointer;\\n}\\n.vcu-list-item.selected[data-v-17cb43ee] {\\n  background: #f0f0f0;\\n}\\n.split-wrap[data-v-17cb43ee] {\\n  height: 750px;\\n}\\n.split-wrap .split-pane[data-v-17cb43ee] {\\n  padding: 20px;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-17cb43ee\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/less-loader/dist/cjs.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/views/project/project.vue\n// module id = xz1j\n// module chunks = 13"],"sourceRoot":""}