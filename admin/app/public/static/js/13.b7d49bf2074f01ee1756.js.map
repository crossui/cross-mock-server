{"version":3,"sources":["webpack:///./src/views/project/project.vue?abff","webpack:///src/views/project/project.vue","webpack:///./src/views/project/project.vue","webpack:///./src/views/project/project.vue?3063","webpack:///./src/views/project/project.vue?5011"],"names":["module","exports","__webpack_require__","push","i","project","name","data","_this2","this","listLoading","projVisible","projModalType","paginationProj","size","simple","total","onChange","page","onShowSizeChange","formProj","projectname","ruleProj","required","message","trigger","pattern","projectListData","selectedProject","searchModuleName","modModalType","modleVisible","pmidOptions","formModle","modulename","pmid","ruleModle","splitVal","tabledata","expandedRowKeys","loading","columns","title","dataIndex","width","scopedSlots","customRender","align","mounted","init","methods","fetchProject","pageNum","_this3","$request","method","url","params","pagesize","then","res","rows","length","pid","totals","fetch","catch","err","handleAddProjectClick","handleProjOk","_this4","$refs","validate","valid","createtime","util","formatDate","Date","$message","success","handleProjCancel","error","resetFields","handleEidtProj","record","_this5","$nextTick","assign_default","handleDeleteProj","_this","$confirm","content","onOk","id","handleSelectProj","_this6","projectid","result","label","value","forEach","item","mid","toString","convertToTreeData","temp","obj","child","children","map","filter","undefined","handleTableChange","p","t","r","current","handleAddModulesClick","onSearch","handleModleOk","_this7","parseInt","handleModleCancel","handleEidtModule","_this8","handleView","$router","query","handleAddChildModule","handleDeleteModule","esExports","render","_vm","_h","$createElement","_c","_self","attrs","bodyStyle","padding","staticClass","model","callback","$$v","expression","slot","type","on","click","_v","dataSource","bordered","pagination","_u","key","fn","index","class","selected","$event","icon","_s","staticStyle","placeholder","enterButton","search","rowKey","indentSize","scroll","y","change","text","_e","maskClosable","ok","cancel","ref","rules","label-width","prop","$set","options","staticRenderFns","Component","normalizeComponent","project_project","ssrContext","__webpack_exports__","locals"],"mappings":"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","file":"static/js/13.b7d49bf2074f01ee1756.js","sourcesContent":["exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.vcu-list-item[data-v-34f35fcd] {\\n  cursor: pointer;\\n}\\n.vcu-list-item.selected[data-v-34f35fcd] {\\n  background: #f0f0f0;\\n}\\n.split-wrap[data-v-34f35fcd] {\\n  height: 750px;\\n}\\n.split-wrap .split-pane[data-v-34f35fcd] {\\n  padding: 20px;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-34f35fcd\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/less-loader/dist/cjs.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/views/project/project.vue\n// module id = 4Q0E\n// module chunks = 13","<template>\r\n  <div>\r\n    <v-card title=\"项目列表\" :bodyStyle=\"{padding: '0px'}\">\r\n      <div class=\"split-wrap\">\r\n        <v-split v-model=\"splitVal\">\r\n          <div slot=\"left\" class=\"split-pane split-pane-left\">\r\n            <div class=\"clearfix margin-bottom-15\">\r\n              <v-button type=\"primary\" size=\"small\" class=\"fr\" @click=\"handleAddProjectClick\">新增</v-button>\r\n            </div>\r\n            <v-list\r\n              :dataSource=\"projectListData\"\r\n              :loading=\"listLoading\"\r\n              bordered\r\n              size=\"small\"\r\n              :pagination=\"paginationProj\"\r\n            >\r\n              <v-list-item\r\n                slot=\"renderItem\"\r\n                slot-scope=\"item, index\"\r\n                key=\"item.pid\"\r\n                v-bind:class=\"{'selected': item.pid == selectedProject}\"\r\n                @click=\"handleSelectProj(item)\"\r\n              >\r\n                <v-button-group size=\"small\" slot=\"actions\">\r\n                  <v-button icon=\"edit\" @click=\"() => handleEidtProj(item)\"></v-button>\r\n                  <v-button icon=\"delete\" @click=\"() => handleDeleteProj(item)\"></v-button>\r\n                </v-button-group>\r\n                <span>{{item.projectname}}</span>\r\n              </v-list-item>\r\n            </v-list>\r\n          </div>\r\n          <div slot=\"right\" class=\"split-pane split-pane-right\">\r\n            <div class=\"clearfix margin-bottom-15\">\r\n              <div class=\"fl\">\r\n                <v-input-search\r\n                  placeholder=\"模块名称\"\r\n                  style=\"width: 200px\"\r\n                  @search=\"onSearch\"\r\n                  enterButton\r\n                  size=\"small\"\r\n                  v-model=\"searchModuleName\"\r\n                ></v-input-search>\r\n              </div>\r\n              <v-button type=\"primary\" size=\"small\" class=\"fr\" @click=\"handleAddModulesClick\">新增</v-button>\r\n            </div>\r\n            <v-table\r\n              :rowKey=\"record => record.mid\"\r\n              :indentSize=\"30\"\r\n              :columns=\"columns\"\r\n              :dataSource=\"tabledata\"\r\n              :scroll=\"{ y: 500 }\"\r\n              :pagination=\"false\"\r\n              :loading=\"loading\"\r\n              :expandedRowKeys=\"expandedRowKeys\"\r\n              @change=\"handleTableChange\"\r\n              bordered\r\n            >\r\n              <template slot=\"operation\" slot-scope=\"text, record, index\">\r\n                <div class=\"editable-row-operations\">\r\n                  <v-button-group size=\"small\">\r\n                    <v-button @click=\"() => handleAddChildModule(record)\" v-if=\"!record.child\">添加</v-button>\r\n                    <v-button @click=\"() => handleEidtModule(record)\">编辑</v-button>\r\n                    <v-button @click=\"() => handleDeleteModule(record)\">删除</v-button>\r\n                    <v-button @click=\"() => handleView(record)\">查看接口</v-button>\r\n                  </v-button-group>\r\n                </div>\r\n              </template>\r\n            </v-table>\r\n          </div>\r\n        </v-split>\r\n      </div>\r\n    </v-card>\r\n\r\n    <v-modal\r\n      title=\"项目名称\"\r\n      v-model=\"projVisible\"\r\n      @ok=\"handleProjOk\"\r\n      @cancel=\"handleProjCancel\"\r\n      :maskClosable=\"false\"\r\n    >\r\n      <v-form ref=\"formproj\" :model=\"formProj\" :rules=\"ruleProj\" :label-width=\"50\">\r\n        <v-form-item label=\"名称\" prop=\"projectname\">\r\n          <v-input type=\"text\" v-model=\"formProj.projectname\" />\r\n        </v-form-item>\r\n      </v-form>\r\n    </v-modal>\r\n\r\n    <v-modal\r\n      title=\"模块名称\"\r\n      v-model=\"modleVisible\"\r\n      @ok=\"handleModleOk\"\r\n      @cancel=\"handleModleCancel\"\r\n      :maskClosable=\"false\"\r\n    >\r\n      <v-form ref=\"formModle\" :model=\"formModle\" :rules=\"ruleModle\" :label-width=\"80\">\r\n        <v-form-item label=\"上级模块\" prop=\"pmid\">\r\n          <v-select v-model=\"formModle.pmid\" style=\"width:100%\" :options=\"pmidOptions\"></v-select>\r\n        </v-form-item>\r\n        <v-form-item label=\"名称\" prop=\"modulename\">\r\n          <v-input type=\"text\" v-model=\"formModle.modulename\" />\r\n        </v-form-item>\r\n      </v-form>\r\n    </v-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Util from \"@/libs/util\";\r\n\r\nconst convertSelectData = data => {\r\n  let result = [\r\n    {\r\n      label: \"顶级模块\",\r\n      value: \"0\"\r\n    }\r\n  ];\r\n  data.forEach(item => {\r\n    if (item.pmid === 0) {\r\n      result.push({\r\n        label: item.modulename,\r\n        value: item.mid.toString()\r\n      });\r\n    }\r\n  });\r\n  return result;\r\n};\r\n\r\nconst convertToTreeData = (data, pid) => {\r\n  let result = [],\r\n    temp;\r\n  for (let i = 0; i < data.length; i++) {\r\n    if (data[i].pmid === pid) {\r\n      let obj = data[i];\r\n      temp = convertToTreeData(data, data[i].mid);\r\n      if (temp.length > 0) {\r\n        temp.forEach(item => {\r\n          item.child = true;\r\n        });\r\n        obj.children = temp;\r\n      }\r\n      result.push(obj);\r\n    }\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nexport default {\r\n  name: \"project_index\",\r\n  data() {\r\n    return {\r\n      listLoading: false,\r\n      projVisible: false,\r\n      projModalType: true,\r\n      paginationProj: {\r\n        size: \"small\",\r\n        simple: true,\r\n        total: 1,\r\n        onChange: page => {\r\n          this.onShowSizeChange(page);\r\n        }\r\n      },\r\n      formProj: {\r\n        projectname: \"\"\r\n      },\r\n      ruleProj: {\r\n        projectname: [\r\n          {\r\n            required: true,\r\n            message: \"不能为空\",\r\n            trigger: \"blur\"\r\n          },\r\n          { pattern: /^(?!(\\s+$))/, message: \"不可为纯空格\" }\r\n        ]\r\n      },\r\n      projectListData: [],\r\n      selectedProject: \"\",\r\n\r\n      searchModuleName: \"\",\r\n      modModalType: true,\r\n      modleVisible: false,\r\n      pmidOptions: [],\r\n      formModle: {\r\n        modulename: \"\",\r\n        pmid: \"0\"\r\n      },\r\n      ruleModle: {\r\n        pmid: [\r\n          {\r\n            required: true,\r\n            message: \"不能为空\"\r\n          }\r\n        ],\r\n        modulename: [\r\n          {\r\n            required: true,\r\n            message: \"不能为空\",\r\n            trigger: \"blur\"\r\n          },\r\n          { pattern: /^(?!(\\s+$))/, message: \"不可为纯空格\" }\r\n        ]\r\n      },\r\n      splitVal: 0.3,\r\n      tabledata: [],\r\n      expandedRowKeys: [],\r\n      //pagination: { showQuickJumper: true },\r\n      loading: false,\r\n      columns: [\r\n        {\r\n          title: \"模块名称\",\r\n          dataIndex: \"modulename\"\r\n        },\r\n        {\r\n          title: \"操作\",\r\n          width: \"30%\",\r\n          scopedSlots: { customRender: \"operation\" },\r\n          align: \"center\"\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.fetchProject(1);\r\n    },\r\n    //获取项目列表\r\n    fetchProject(pageNum) {\r\n      this.listLoading = true;\r\n      this.$request({\r\n        method: \"GET\",\r\n        url: `/projects`,\r\n        params: {\r\n          page: pageNum,\r\n          pagesize: 10\r\n        }\r\n      })\r\n        .then(res => {\r\n          if (res) {\r\n            this.projectListData = res.data.rows;\r\n            this.selectedProject = res.data.rows.length\r\n              ? res.data.rows[0].pid\r\n              : \"\";\r\n            this.paginationProj.total = res.data.totals;\r\n            this.fetch(1);\r\n          }\r\n          this.listLoading = false;\r\n        })\r\n        .catch(err => {\r\n          this.listLoading = false;\r\n        });\r\n    },\r\n    //新增项目\r\n    handleAddProjectClick() {\r\n      this.projModalType = true;\r\n      this.projVisible = true;\r\n    },\r\n    //项目新增确认\r\n    handleProjOk() {\r\n      this.$refs[\"formproj\"].validate(valid => {\r\n        if (valid) {\r\n          let params = {\r\n            projectname: this.formProj.projectname\r\n          };\r\n          let method = \"POST\";\r\n          let url = \"/projects\";\r\n          if (!this.projModalType) {\r\n            method = \"PATCH\";\r\n            url = `/projects/${this.formProj.pid}`;\r\n          } else {\r\n            params.createtime = Util.formatDate(new Date());\r\n          }\r\n          this.$request({\r\n            method,\r\n            url,\r\n            data: params\r\n          }).then(res => {\r\n            if (res) {\r\n              this.$message.success(res.message);\r\n              this.fetchProject(1);\r\n              this.handleProjCancel();\r\n            }\r\n          });\r\n        } else {\r\n          this.$message.error(\"验证失败!\");\r\n        }\r\n      });\r\n    },\r\n    //项目新增取消\r\n    handleProjCancel() {\r\n      this.$refs[\"formproj\"].resetFields();\r\n      this.projVisible = false;\r\n    },\r\n    //项目编辑\r\n    handleEidtProj(record) {\r\n      this.projModalType = false;\r\n      this.projVisible = true;\r\n      this.$nextTick(() => {\r\n        this.formProj = Object.assign({}, this.formProj, record);\r\n      });\r\n    },\r\n    //项目删除\r\n    handleDeleteProj(record) {\r\n      let _this = this;\r\n      this.$confirm({\r\n        title: \"提示\",\r\n        content: \"删除项目将会移除其下面所有的模块及接口且不可恢复\",\r\n        onOk() {\r\n          _this\r\n            .$request({\r\n              method: \"POST\",\r\n              url: \"/projects/delete\",\r\n              data: {\r\n                id: record.pid\r\n              }\r\n            })\r\n            .then(res => {\r\n              if (res) {\r\n                _this.$message.success(res.message);\r\n                _this.fetchProject(1);\r\n              }\r\n            });\r\n        }\r\n      });\r\n    },\r\n    //选择项目\r\n    handleSelectProj(record) {\r\n      this.searchModuleName = \"\"\r\n      this.selectedProject = record.pid;\r\n      this.fetch(1);\r\n    },\r\n    //项目分页\r\n    onShowSizeChange(page) {\r\n      this.fetchProject(page);\r\n    },\r\n    //获取表格数据   pageNum  当前请求的页码\r\n    fetch(pageNum) {\r\n      this.loading = true;\r\n      this.$request({\r\n        method: \"GET\",\r\n        url: `/modules`,\r\n        params: {\r\n          modulename: this.searchModuleName,\r\n          projectid: this.selectedProject,\r\n          page: pageNum,\r\n          pagesize: 10\r\n        }\r\n      }).then(res => {\r\n        if (this.searchModuleName == \"\") {\r\n          this.pmidOptions = convertSelectData(res.data.rows);\r\n          this.tabledata = convertToTreeData(res.data.rows, 0);\r\n          this.expandedRowKeys = this.tabledata\r\n            .map(item => {\r\n              if (item.children) {\r\n                return item.mid;\r\n              }\r\n            })\r\n            .filter(item => {\r\n              return item != undefined;\r\n            });\r\n        }else{\r\n          this.tabledata = res.data.rows\r\n        }\r\n\r\n        /* this.pagination = Util.pager(this, this.pagination, {\r\n          current: pageNum,\r\n          total: res.data.totals\r\n        }); */\r\n        this.loading = false;\r\n      });\r\n    },\r\n    //表格分页\r\n    handleTableChange(p, t, r) {\r\n      this.fetch(p.current);\r\n    },\r\n    //新增模块\r\n    handleAddModulesClick() {\r\n      this.modModalType = true;\r\n      this.modleVisible = true;\r\n    },\r\n    //搜索\r\n    onSearch() {\r\n      this.fetch(1);\r\n    },\r\n    //模块新增确认\r\n    handleModleOk() {\r\n      this.$refs[\"formModle\"].validate(valid => {\r\n        if (valid) {\r\n          let params = {\r\n            modulename: this.formModle.modulename,\r\n            projectid: this.selectedProject,\r\n            pmid: parseInt(this.formModle.pmid)\r\n          };\r\n          let method = \"POST\";\r\n          let url = \"/modules\";\r\n          if (!this.modModalType) {\r\n            method = \"PATCH\";\r\n            url = `/modules/${this.formModle.mid}`;\r\n          } else {\r\n            params.createtime = Util.formatDate(new Date());\r\n          }\r\n\r\n          this.$request({\r\n            method,\r\n            url,\r\n            data: params\r\n          }).then(res => {\r\n            if (res) {\r\n              this.$message.success(res.message);\r\n              this.fetch(1);\r\n              this.handleModleCancel();\r\n            }\r\n          });\r\n        } else {\r\n          this.$message.error(\"验证失败!\");\r\n        }\r\n      });\r\n    },\r\n    //模块新增取消\r\n    handleModleCancel() {\r\n      this.$refs[\"formModle\"].resetFields();\r\n      this.modleVisible = false;\r\n    },\r\n    //编辑模块\r\n    handleEidtModule(record) {\r\n      this.modModalType = false;\r\n      this.modleVisible = true;\r\n      this.$nextTick(() => {\r\n        record.pmid = record.pmid.toString();\r\n        this.formModle = Object.assign({}, this.formModle, record);\r\n      });\r\n    },\r\n    //查看接口\r\n    handleView(record) {\r\n      this.$router.push({\r\n        name: \"interface_index\",\r\n        query: {\r\n          pid: this.selectedProject,\r\n          mid: record.mid\r\n        }\r\n      });\r\n    },\r\n    //添加子级模块\r\n    handleAddChildModule(record) {\r\n      this.modModalType = true;\r\n      this.modleVisible = true;\r\n      this.formModle.pmid = record.mid.toString();\r\n    },\r\n    //删除模块\r\n    handleDeleteModule(record) {\r\n      let _this = this;\r\n      this.$confirm({\r\n        title: \"提示\",\r\n        content: \"删除模块将会移除其下面所有的接口且不可恢复?\",\r\n        onOk() {\r\n          _this\r\n            .$request({\r\n              method: \"POST\",\r\n              url: \"/modules/delete\",\r\n              data: {\r\n                id: record.mid\r\n              }\r\n            })\r\n            .then(res => {\r\n              if (res) {\r\n                _this.$message.success(res.message);\r\n                _this.fetch(1);\r\n              }\r\n            });\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.vcu-list-item {\r\n  cursor: pointer;\r\n  &.selected {\r\n    background: #f0f0f0;\r\n  }\r\n}\r\n.split-wrap {\r\n  height: 750px;\r\n  .split-pane {\r\n    padding: 20px;\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/project/project.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-card',{attrs:{\"title\":\"项目列表\",\"bodyStyle\":{padding: '0px'}}},[_c('div',{staticClass:\"split-wrap\"},[_c('v-split',{model:{value:(_vm.splitVal),callback:function ($$v) {_vm.splitVal=$$v},expression:\"splitVal\"}},[_c('div',{staticClass:\"split-pane split-pane-left\",attrs:{\"slot\":\"left\"},slot:\"left\"},[_c('div',{staticClass:\"clearfix margin-bottom-15\"},[_c('v-button',{staticClass:\"fr\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.handleAddProjectClick}},[_vm._v(\"新增\")])],1),_vm._v(\" \"),_c('v-list',{attrs:{\"dataSource\":_vm.projectListData,\"loading\":_vm.listLoading,\"bordered\":\"\",\"size\":\"small\",\"pagination\":_vm.paginationProj},scopedSlots:_vm._u([{key:\"renderItem\",fn:function(item, index){return _c('v-list-item',{key:\"item.pid\",class:{'selected': item.pid == _vm.selectedProject},on:{\"click\":function($event){_vm.handleSelectProj(item)}}},[_c('v-button-group',{attrs:{\"slot\":\"actions\",\"size\":\"small\"},slot:\"actions\"},[_c('v-button',{attrs:{\"icon\":\"edit\"},on:{\"click\":function () { return _vm.handleEidtProj(item); }}}),_vm._v(\" \"),_c('v-button',{attrs:{\"icon\":\"delete\"},on:{\"click\":function () { return _vm.handleDeleteProj(item); }}})],1),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item.projectname))])],1)}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"split-pane split-pane-right\",attrs:{\"slot\":\"right\"},slot:\"right\"},[_c('div',{staticClass:\"clearfix margin-bottom-15\"},[_c('div',{staticClass:\"fl\"},[_c('v-input-search',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"模块名称\",\"enterButton\":\"\",\"size\":\"small\"},on:{\"search\":_vm.onSearch},model:{value:(_vm.searchModuleName),callback:function ($$v) {_vm.searchModuleName=$$v},expression:\"searchModuleName\"}})],1),_vm._v(\" \"),_c('v-button',{staticClass:\"fr\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.handleAddModulesClick}},[_vm._v(\"新增\")])],1),_vm._v(\" \"),_c('v-table',{attrs:{\"rowKey\":function (record) { return record.mid; },\"indentSize\":30,\"columns\":_vm.columns,\"dataSource\":_vm.tabledata,\"scroll\":{ y: 500 },\"pagination\":false,\"loading\":_vm.loading,\"expandedRowKeys\":_vm.expandedRowKeys,\"bordered\":\"\"},on:{\"change\":_vm.handleTableChange},scopedSlots:_vm._u([{key:\"operation\",fn:function(text, record, index){return [_c('div',{staticClass:\"editable-row-operations\"},[_c('v-button-group',{attrs:{\"size\":\"small\"}},[(!record.child)?_c('v-button',{on:{\"click\":function () { return _vm.handleAddChildModule(record); }}},[_vm._v(\"添加\")]):_vm._e(),_vm._v(\" \"),_c('v-button',{on:{\"click\":function () { return _vm.handleEidtModule(record); }}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('v-button',{on:{\"click\":function () { return _vm.handleDeleteModule(record); }}},[_vm._v(\"删除\")]),_vm._v(\" \"),_c('v-button',{on:{\"click\":function () { return _vm.handleView(record); }}},[_vm._v(\"查看接口\")])],1)],1)]}}])})],1)])],1)]),_vm._v(\" \"),_c('v-modal',{attrs:{\"title\":\"项目名称\",\"maskClosable\":false},on:{\"ok\":_vm.handleProjOk,\"cancel\":_vm.handleProjCancel},model:{value:(_vm.projVisible),callback:function ($$v) {_vm.projVisible=$$v},expression:\"projVisible\"}},[_c('v-form',{ref:\"formproj\",attrs:{\"model\":_vm.formProj,\"rules\":_vm.ruleProj,\"label-width\":50}},[_c('v-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"projectname\"}},[_c('v-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.formProj.projectname),callback:function ($$v) {_vm.$set(_vm.formProj, \"projectname\", $$v)},expression:\"formProj.projectname\"}})],1)],1)],1),_vm._v(\" \"),_c('v-modal',{attrs:{\"title\":\"模块名称\",\"maskClosable\":false},on:{\"ok\":_vm.handleModleOk,\"cancel\":_vm.handleModleCancel},model:{value:(_vm.modleVisible),callback:function ($$v) {_vm.modleVisible=$$v},expression:\"modleVisible\"}},[_c('v-form',{ref:\"formModle\",attrs:{\"model\":_vm.formModle,\"rules\":_vm.ruleModle,\"label-width\":80}},[_c('v-form-item',{attrs:{\"label\":\"上级模块\",\"prop\":\"pmid\"}},[_c('v-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"options\":_vm.pmidOptions},model:{value:(_vm.formModle.pmid),callback:function ($$v) {_vm.$set(_vm.formModle, \"pmid\", $$v)},expression:\"formModle.pmid\"}})],1),_vm._v(\" \"),_c('v-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"modulename\"}},[_c('v-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.formModle.modulename),callback:function ($$v) {_vm.$set(_vm.formModle, \"modulename\", $$v)},expression:\"formModle.modulename\"}})],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n// WEBPACK FOOTER //\n// ./src/views/project/project.vue","function injectStyle (ssrContext) {\n  require(\"!!vue-style-loader!css-loader!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-34f35fcd\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./project.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./project.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./project.vue\"\n/* template */\nimport __vue_template__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-34f35fcd\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./project.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-34f35fcd\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/project/project.vue\n// module id = null\n// module chunks = ","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-34f35fcd\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/less-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./project.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"6e0ba1ba\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader!./node_modules/css-loader!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-34f35fcd\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/less-loader/dist/cjs.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/views/project/project.vue\n// module id = jzId\n// module chunks = 13"],"sourceRoot":""}